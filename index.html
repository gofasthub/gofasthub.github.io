<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>GoFastHub üéÑ</title>
<link href="https://fonts.googleapis.com/css2?family=Urbanist:wght@400;600;700&display=swap" rel="stylesheet">
<style>
:root{
  --bg1: linear-gradient(180deg,#0c1422 0%,#15321e 100%);
  --bg2: linear-gradient(180deg,#2d0c0c 0%,#5f2c0f 100%);
  --bg3: linear-gradient(180deg,#1c1440 0%,#0c0f2e 100%);
  --bg4: linear-gradient(180deg,#0e3020 0%,#062d1a 100%);
  --accent:#ff4444;
  --accent2:#4ade80;
  --text:#fff;
  --muted:#a7b2c2;
  --radius:20px;
}

/* reset */
*{box-sizing:border-box;margin:0;padding:0;font-family:'Urbanist',system-ui,sans-serif}
html,body{height:100%;overflow-x:hidden}

/* page */
body{
  background:var(--bg1);
  color:var(--text);
  min-height:100vh;
  display:flex;
  flex-direction:column;
  align-items:center;
  position:relative;
  transition:background 1s ease;
  overflow-y:auto;
}

/* --- PASSWORD SCREEN --- */
#passwordScreen{
  position:fixed;top:0;left:0;width:100%;height:100%;
  background:rgba(6,12,22,0.88);backdrop-filter:blur(10px);
  display:flex;flex-direction:column;align-items:center;justify-content:center;
  z-index:999;opacity:1;transition:opacity .55s ease;
}
#passwordScreen.hidden{opacity:0;pointer-events:none}
#passwordScreen h2{font-size:2rem;margin-bottom:1rem;color:var(--text)}
#passwordInput{
  padding:.8rem 1rem;border-radius:12px;border:none;width:260px;font-size:1rem;outline:none;
  text-align:center;background:rgba(255,255,255,.04);color:var(--text)
}
#passwordButton{
  margin-top:1rem;background:var(--accent);border:none;padding:.7rem 1.2rem;color:#fff;border-radius:12px;
  cursor:pointer;font-weight:700
}
#passwordButton:hover{background:var(--accent2)}

/* lights */
.lights{position:fixed;top:0;left:0;width:100%;display:flex;justify-content:space-around;padding-top:10px;z-index:5;pointer-events:none}
.wire{position:absolute;top:22px;left:0;width:100%;height:2px;background:rgba(70,70,70,.8);border-radius:1px;z-index:1}
.bulb{width:10px;height:18px;border-radius:50% 50% 35% 35%;animation:twinkle 2s infinite ease-in-out;box-shadow:0 0 8px currentColor;z-index:2}
.bulb:nth-child(4n+1){background-color:#ff4444;animation-delay:.2s}
.bulb:nth-child(4n+2){background-color:#4ade80;animation-delay:.5s}
.bulb:nth-child(4n+3){background-color:#60a5fa;animation-delay:.8s}
.bulb:nth-child(4n+4){background-color:#facc15;animation-delay:1.1s}
@keyframes twinkle{0%,100%{opacity:.85;transform:scale(1)}50%{opacity:1;transform:scale(1.12)}}

/* top bar */
.top-bar{
  position:fixed;top:50px;left:50%;transform:translateX(-50%);
  width:92%;height:60px;background:rgba(255,255,255,.08);backdrop-filter:blur(10px);
  border-radius:var(--radius);display:flex;align-items:center;justify-content:space-between;
  padding:0 2rem;border:1px solid rgba(255,255,255,.1);z-index:4
}
.bar-title{font-weight:700;font-size:1.3rem;background:linear-gradient(90deg,var(--accent),var(--accent2));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.nav-right{display:flex;align-items:center;gap:1rem}
.nav-btn{display:flex;align-items:center;gap:.4rem;background:transparent;border:none;color:var(--text);font-size:1rem;cursor:pointer;transition:.25s;font-weight:600;padding:.3rem .6rem;border-radius:12px}
.nav-btn:hover{color:var(--accent2);transform:translateY(-2px)}
.nav-btn.active{color:var(--accent2)}

/* header */
header{text-align:center;margin-top:130px;z-index:2}
h1{font-size:2.2rem;font-weight:700;background:linear-gradient(90deg,var(--accent),var(--accent2));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.subtitle{color:var(--muted);margin-top:.3rem}

/* search bar */
.search-bar{width:100%;max-width:520px;margin:1.5rem auto;z-index:2;transition:opacity .35s}
.search-bar input{width:100%;padding:.9rem 1rem;border-radius:14px;border:2px solid rgba(255,255,255,.08);background:rgba(255,255,255,0.03);color:var(--text);font-size:1rem;outline:none;transition:.2s;backdrop-filter:blur(3px)}

/* grid */
.grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
  gap:1rem;
  width:100%;
  max-width:960px;
  margin-top:1rem;
  z-index:2;
  transition:opacity .35s ease;
}
.card{
  background:rgba(255,255,255,.04);
  border-radius:16px;
  text-align:center;
  box-shadow:0 2px 8px rgba(0,0,0,.3);
  transition:transform .28s cubic-bezier(.2,.9,.2,1),box-shadow .28s,opacity .28s;
  cursor:pointer;padding:1rem .8rem;border:1px solid rgba(255,255,255,.06);
  position:relative;overflow:hidden;opacity:1;
}
.card.small-fix{width:auto;max-width:420px}
.card:hover{transform:translateY(-6px);box-shadow:0 10px 24px rgba(0,0,0,.36)}
.card h3{font-size:1.1rem;margin-bottom:.35rem}
.card p{font-size:.85rem;color:var(--muted);margin-bottom:.6rem}
.card .play-button{position:absolute;bottom:-40px;left:50%;transform:translateX(-50%);background:var(--accent);color:#fff;border:none;padding:.5rem 1.2rem;border-radius:12px;font-size:.9rem;cursor:pointer;opacity:0;transition:all .25s ease}
.card:hover .play-button{bottom:10px;opacity:1}

/* options */
.options{display:none;opacity:0;transition:opacity .35s ease;margin-top:2rem;z-index:2;text-align:center;background:rgba(255,255,255,.04);backdrop-filter:blur(6px);padding:1.6rem;border-radius:16px;border:1px solid rgba(255,255,255,.06);max-width:760px;margin-left:auto;margin-right:auto}
.options h2{font-size:1.4rem;margin-bottom:1rem}
.switch{display:flex;align-items:center;justify-content:space-between;background:rgba(255,255,255,.035);margin:.6rem auto;padding:.7rem .9rem;width:320px;border-radius:14px;border:1px solid rgba(255,255,255,.05)}
.switch span{font-weight:600}
.toggle{width:50px;height:26px;border-radius:13px;background:#b91c1c;position:relative;cursor:pointer;transition:.25s}
.toggle::after{content:"";position:absolute;top:3px;left:4px;width:20px;height:20px;border-radius:50%;background:#fff;transition:.25s}
.toggle.active{background:#22c55e;box-shadow:0 0 8px #22c55e}
.toggle.active::after{left:26px}

/* presents and tree */
.presents{position:fixed;bottom:-40px;left:-30px;width:380px;z-index:2;transition:opacity .35s}
.tree{position:fixed;bottom:-50px;right:-40px;width:420px;z-index:2;transition:opacity .35s}

/* footer */
footer{text-align:center;color:var(--muted);padding:2rem 0 .5rem;font-size:.9rem;z-index:2;position:relative}

/* snow canvas */
#snow{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:1}
</style>
</head>
<body>

<!-- PASSWORD SCREEN -->
<div id="passwordScreen" aria-hidden="false">
  <h2>üéÖ Enter Password to Access GoFastHub</h2>
  <input type="password" id="passwordInput" placeholder="Enter password..." aria-label="Password">
  <button id="passwordButton">Enter</button>
</div>

<!-- MAIN CONTENT -->
<canvas id="snow"></canvas>
<div class="lights" id="lights"><div class="wire"></div></div>

<div class="top-bar">
  <div class="bar-title">üéÑ GoFastHub</div>
  <div class="nav-right">
    <button class="nav-btn active" id="homeBtn">üè† Home</button>
    <button class="nav-btn" id="optionsBtn">‚öôÔ∏è Options</button>
  </div>
</div>

<header>
  <h1>üéÑ gofasthub.github.io üéÖ</h1>
  <div class="subtitle">Find and play awesome games this Christmas!</div>
</header>

<div class="search-bar" id="searchBar">
  <input type="text" id="searchInput" placeholder="Search for a game..." autocomplete="off" />
</div>

<!-- GAMES GRID (all games inside this container) -->
<div class="grid" id="gameGrid">

  <div class="card" data-name="Drive Online" onclick="location.href='https://sites.google.com/classroom.center/view/driving-games/drive-online?authuser=0'">
    <h3>Drive Online</h3><p>Race through the city in real-time.</p><button class="play-button">Play</button>
  </div>

  <div class="card" data-name="Drive Online V2" onclick="location.href='https://playhop.com/dist-app/422450?skip-guard=1&header=no&utm_source=distrib&utm_medium=cursoralabs'">
    <h3>Drive Online V2</h3><p>The sequel with new cars and maps!</p><button class="play-button">Play</button>
  </div>

  <div class="card" data-name="Kart Bros" onclick="location.href='https://kartbros.io'">
    <h3>Kart Bros</h3><p>Compete with friends in fun kart races!</p><button class="play-button">Play</button>
  </div>

  <div class="card" data-name="Winter Clash 3D" onclick="location.href='WinterClash.html'">
    <h3>Winter Clash 3D</h3><p>Battle in snowy arenas this holiday season!</p><button class="play-button">Play</button>
  </div>

  <div class="card" data-name="Parkour Snowboard" onclick="location.href='https://st.8games.net/10/8g/igra-obbi-snoubord-parkur/'">
    <h3>Parkour Snowboard</h3><p>Shred the slopes with style!</p><button class="play-button">Play</button>
  </div>

  <div class="card" data-name="Geo FS" onclick="location.href='https://www.geo-fs.com/geofs.php'">
    <h3>Geo FS</h3><p>Fly realistic aircraft in a global multiplayer world.</p><button class="play-button">Play</button>
  </div>

  <div class="card" data-name="ARC" onclick="location.href='https://ragdollhit.gg/games/ragdoll-archers/'">
    <h3>ARC</h3><p>Master your aim in ragdoll archer battles!</p><button class="play-button">Play</button>
  </div>

  <div class="card" data-name="Ragdoll Hit" onclick="location.href='https://ragdollhit.gg/games/ragdoll-hit-unblocked/'">
    <h3>Ragdoll Hit</h3><p>Physics-based combat!</p><button class="play-button">Play</button>
  </div>

  <div class="card" data-name="Poly Track" onclick="location.href='https://www.kodub.com/apps/polytrack'">
    <h3>Poly Track</h3><p>Build and race low-poly tracks.</p><button class="play-button">Play</button>
  </div>

  <div class="card" data-name="Melon Playground" onclick="location.href='bg3.html'">
    <h3>Bird Game 3</h3><p>yooo no way bird game 3 before gta 6?</p><button class="play-button">Play</button>
  </div>

  <div class="card" data-name="Aimbot Shooter" onclick="location.href='AimbotShooter.html'">
    <h3>Aimbot Shooter</h3><p>Fast-paced FPS challenge.</p><button class="play-button">Play</button>
  </div>

  <div class="card" data-name="Squid Playground" onclick="location.href='SquidPlayground.html'">
    <h3>Squid Playground</h3><p>Survive and fight in the playground world.</p><button class="play-button">Play</button>
  </div>

  <div class="card" data-name="BeamNG" onclick="location.href='CarCrash.html'">
    <h3>BeamNG</h3><p>Crash, race & simulate car physics.</p><button class="play-button">Play</button>
  </div>

  <div class="card" data-name="Snow Rider 4K" onclick="location.href='SnowRider.html'">
    <h3>Snow Rider 4K</h3><p>Ride down snowy mountains in 4K!</p><button class="play-button">Play</button>
  </div>

  <div class="card" data-name="Drive Angry" onclick="location.href='https://gamecollections.me/game/3kh0-assets-main/drive-mad/'">
    <h3>Drive Angry</h3><p>Race fast and furious ‚Äî try not to crash!</p><button class="play-button">Play</button>
  </div>

  <div class="card" data-name="Formula One" onclick="location.href='https://kdata1.com/2024/05/super-star-car6363233/'">
    <h3>Formula One</h3><p>High-speed Formula 1 challenge.</p><button class="play-button">Play</button>
  </div>

  <div class="card" data-name="Drift Hunterz" onclick="location.href='https://ubg76.gitlab.io/drift-hunters/'">
    <h3>Drift Hunterz</h3><p>Master drifting!</p><button class="play-button">Play</button>
  </div>

  <div class="card" data-name="Skate." onclick="location.href='http://skate6.com/'">
    <h3>Skate.</h3><p>Pull off tricks and explore skateparks!</p><button class="play-button">Play</button>
  </div>

  <div class="card" data-name="Super Liquid Soccer" onclick="location.href='https://superliquid-soccer.com/gg/super-liquid-soccer/'">
    <h3>Super Liquid Soccer</h3><p>Fluid, physics-y soccer action.</p><button class="play-button">Play</button>
  </div>

  <div class="card" data-name="Blacktop: Police Chase" onclick="location.href='https://kdata1.com/5000/2025/blacktop-police-chase/'">
    <h3>Blacktop: Police Chase</h3><p>High-speed police pursuit thrills!</p><button class="play-button">Play</button>
  </div>

  <div class="card" data-name="Rocket League" onclick="location.href='https://m.igroutka.ru/ni3/81/RocketSoccer/'">
    <h3>Rocket League</h3><p>Car soccer action!</p><button class="play-button">Play</button>
  </div>

  <div class="card" data-name="Stunt Bike Extreme" onclick="location.href='https://g.igroutka.ru/games/793/2xTdm6GrXEuN0Kwq/fe831138-3321-40ed-b8cd-f1c482091e04/index.html'">
    <h3>Stunt Bike Extreme</h3><p>Insane stunts and tight tracks.</p><button class="play-button">Play</button>
  </div>

  <div class="card" data-name="Ping Ponk" onclick="location.href='https://pkgames.org/ping-pong-go!/index.html'">
    <h3>Ping Ponk</h3><p>Fast arcade table tennis.</p><button class="play-button">Play</button>
  </div>

  <div class="card" data-name="Basketball Superstars" onclick="location.href='https://g2.igroutka.ru/lib/crazy/games/basketball-superstars/'">
    <h3>Basketball Superstars</h3><p>Slam-dunk arcade basketball.</p><button class="play-button">Play</button>
  </div>

  <div class="card" data-name="Snake Modded" onclick="location.href='https://googlesnakemods.com/v/5/'">
    <h3>Snake Modded</h3><p>Classic snake, fully modded.</p><button class="play-button">Play</button>
  </div>

  <div class="card" data-name="FortZone" onclick="location.href='asd.html'">
    <h3>FortZone</h3><p>Battle and survive in this action arena.</p><button class="play-button">Play</button>
  </div>

  <div class="card" data-name="Speed Stars" onclick="location.href='https://speedstarsfree.io/speed-stars.embed'">
    <h3>Speed Stars</h3><p>Rhythm-based running championships.</p><button class="play-button">Play</button>
  </div>

  <div class="card" data-name="Geo Dash" onclick="location.href='https://1games.io/game/geometry-lite/'">
    <h3>Geo Dash</h3><p>A fast-paced obstacle platformer.</p><button class="play-button">Play</button>
  </div>

  <div class="card" data-name="1v1.lol" onclick="location.href='https://1v1.lol'">
    <h3>1v1.lol</h3><p>Build, edit and battle in fast 1v1 fights!</p><button class="play-button">Play</button>
  </div>

</div>
<!-- end #gameGrid -->

<!-- options panel -->
<div class="options" id="optionsPanel">
  <h2>üéÖ Options</h2>
  <div class="switch"><span>Toggle Snow ‚ùÑÔ∏è</span><div class="toggle" id="snowToggle" role="switch" tabindex="0"></div></div>
  <div class="switch"><span>Toggle Presents üéÅ</span><div class="toggle" id="presentsToggle" role="switch" tabindex="0"></div></div>
  <div class="switch"><span>Toggle Tree üéÑ</span><div class="toggle" id="treeToggle" role="switch" tabindex="0"></div></div>
  <div class="switch"><span>Change Background üåà</span><div class="toggle" id="bgToggle" role="button" tabindex="0"></div></div>
</div>

<img id="presentsImg" src="https://th.bing.com/th/id/R.9fb612f033d37e0d2a350e82cfbb9f70?rik=j4HsZp1b9Xz9dA&riu=http%3a%2f%2fclipart-library.com%2fimages_k%2fchristmas-presents-transparent-background%2fchristmas-presents-transparent-background-23.png&ehk=bX%2ffvE8xkrSmoc1mC8KI%2bw3tJVGbl3D45cbzSLU1YdY%3d&risl=&pid=ImgRaw&r=0" class="presents" alt="presents">
<img id="treeImg" src="https://freepngimg.com/thumb/christmas/30416-3-christmas-tree-transparent-background.png" class="tree" alt="tree">

<footer>
  ¬© <span id="year"></span> GoFastHub | Made with üéÅ & ‚ù§Ô∏è by
  <a href="https://github.com/gofasthub" target="_blank">@gofasthub</a>
</footer>

<script>
/* ---------- PASSWORD (fastxmas normal + fastchristmas ERROR 601 full wipe) ---------- */
const passwordScreen = document.getElementById('passwordScreen');
const passwordInput  = document.getElementById('passwordInput');
const passwordButton = document.getElementById('passwordButton');

function fadeOutPasswordScreen(cb){
  passwordScreen.classList.add('hidden');
  setTimeout(()=>{ try{ passwordScreen.style.display='none'; }catch(e){}; if(cb) cb(); }, 580);
}

// Enter key and click
passwordButton.addEventListener('click', handlePassword);
passwordInput.addEventListener('keydown', (e)=>{ if(e.key==='Enter') handlePassword(); });

function handlePassword(){
  const val = String(passwordInput.value||'').trim().toLowerCase();
  if(val === 'fastxmas'){
    // normal site: fade password screen away
    fadeOutPasswordScreen();
    return;
  }
  if(val === 'fastchristmas'){
    // Easter egg: fade then full page replace with ERROR 601 (Option A)
    passwordScreen.style.transition = 'opacity .55s ease';
    passwordScreen.style.opacity = '0';
    setTimeout(()=>{
      // Replace entire document body with an ERROR 601 page
      document.documentElement.innerHTML = ''; // clear html to avoid weird half-states
      // Build minimal error page
      const errHtml = `
        <!doctype html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>ERROR 601</title>
        <style>
          html,body{height:100%;margin:0;background:black;display:flex;align-items:center;justify-content:center}
          h1{color:#ff1f1f;font-size:6rem;font-weight:900;font-family:monospace;text-shadow:0 0 30px #ff1f1f}
          @media(max-width:600px){h1{font-size:3rem;padding:0 12px;text-align:center}}
        </style></head><body><h1>ERROR 601</h1></body></html>
      `;
      document.write(errHtml);
      document.close();
    }, 550);
    return;
  }

  // wrong password: small red flash and shake
  passwordInput.style.border = '2px solid #ff4d4d';
  passwordInput.animate([{transform:'translateX(-8px)'},{transform:'translateX(8px)'},{transform:'translateX(0)'}],{duration:260});
  setTimeout(()=>{ passwordInput.style.border = 'none'; }, 900);
}

/* ---------- Year + lights ---------- */
document.getElementById("year").textContent = new Date().getFullYear();
const lights = document.getElementById("lights");
for(let i=0;i<40;i++){ const b = document.createElement("div"); b.className='bulb'; lights.appendChild(b); }

/* ---------- Search: move matches to top + fade-in (when typing) ---------- */
const searchInput = document.getElementById('searchInput');
const gameGrid = document.getElementById('gameGrid');

function fadeInElements(elements){
  elements.forEach((el, idx)=> {
    el.style.transition = 'opacity .34s ease, transform .34s ease';
    el.style.opacity = '0';
    el.style.transform = 'translateY(8px)';
    setTimeout(()=>{ el.style.opacity='1'; el.style.transform='translateY(0)'; }, 60 + idx*45);
  });
}

// helper to restore original order if search cleared
function restoreOriginalOrder(){
  // we keep the original order by re-inserting nodes in the order of a stored array
  if(window.__originalOrder && Array.isArray(window.__originalOrder)){
    window.__originalOrder.forEach(node => {
      if(node.parentNode === null) gameGrid.appendChild(node);
      else gameGrid.appendChild(node);
    });
  }
}

window.addEventListener('load', ()=> {
  // store original order of cards
  window.__originalOrder = Array.from(gameGrid.querySelectorAll('.card'));
});

searchInput.addEventListener('input',(e)=>{
  const q = (e.target.value||'').toLowerCase().trim();
  const cards = Array.from(gameGrid.querySelectorAll('.card'));
  // clear inline transitions to avoid stacking
  cards.forEach(c => { c.style.transition = 'opacity .32s ease, transform .32s ease'; });

  if(!q){
    // show all and restore original order
    cards.forEach(c => { c.style.display='block'; c.style.opacity='1'; c.style.transform=''; });
    restoreOriginalOrder();
    return;
  }

  const matches = cards.filter(c => c.dataset.name && c.dataset.name.toLowerCase().includes(q));
  const nonMatches = cards.filter(c => !(c.dataset.name && c.dataset.name.toLowerCase().includes(q)));

  // hide non matches
  nonMatches.forEach((c)=>{
    c.style.opacity='0';
    setTimeout(()=>{ c.style.display='none'; }, 300);
  });

  // bring matches to top preserving original relative order
  // determine original order index map
  const order = window.__originalOrder || [];
  matches.sort((a,b)=>{
    return order.indexOf(a) - order.indexOf(b);
  });

  // Prepend matches in reverse so first stays on top
  matches.slice().reverse().forEach(m=>{
    m.style.display='block';
    m.style.opacity='0';
    gameGrid.prepend(m);
  });

  // Fade in visible cards (matches)
  const visible = Array.from(gameGrid.querySelectorAll('.card')).filter(c=>c.style.display !== 'none');
  fadeInElements(visible);

  // If only one visible card, ensure it doesn't stretch: add small-fix class to constrain width
  if(visible.length === 1){
    visible[0].classList.add('small-fix');
  } else {
    visible.forEach(v=>v.classList.remove('small-fix'));
  }
});

/* ---------- Home / Options ---------- */
const homeBtn = document.getElementById('homeBtn');
const optionsBtn = document.getElementById('optionsBtn');
const searchBar = document.getElementById('searchBar');
const optionsPanel = document.getElementById('optionsPanel');

function setActive(btn){
  [homeBtn,optionsBtn].forEach(b=>b.classList.remove('active'));
  btn.classList.add('active');
}

optionsBtn.addEventListener('click', ()=>{
  setActive(optionsBtn);
  gameGrid.style.opacity='0';
  searchBar.style.opacity='0';
  setTimeout(()=>{
    gameGrid.style.display='none';
    searchBar.style.display='none';
    optionsPanel.style.display='block';
    setTimeout(()=> optionsPanel.style.opacity='1',50);
  },320);
});

homeBtn.addEventListener('click', ()=>{
  setActive(homeBtn);
  optionsPanel.style.opacity='0';
  setTimeout(()=>{
    optionsPanel.style.display='none';
    gameGrid.style.display='grid';
    searchBar.style.display='block';
    setTimeout(()=>{ gameGrid.style.opacity='1'; searchBar.style.opacity='1'; },50);
  },320);
});

/* ---------- Snow (toned down interactive) ---------- */
const canvas = document.getElementById('snow');
const ctx = canvas.getContext('2d');
let flakes = [], mouse = {x:-9999,y:-9999};

function resizeCanvas(){ canvas.width = innerWidth; canvas.height = innerHeight; }
window.addEventListener('resize', resizeCanvas);
resizeCanvas();

const FLAKE_COUNT = 160;
for(let i=0;i<FLAKE_COUNT;i++){
  flakes.push({
    x: Math.random()*canvas.width,
    y: Math.random()*canvas.height,
    r: Math.random()*2 + 0.9,
    vy: Math.random()*0.45 + 0.15,
    opacity: Math.random()*0.5 + 0.18,
    angle: Math.random()*Math.PI*2
  });
}

window.addEventListener('mousemove', e=>{ mouse.x = e.clientX; mouse.y = e.clientY; });
window.addEventListener('mouseout', ()=>{ mouse.x = -9999; mouse.y = -9999; });

function drawSnow(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  const t = Date.now();
  flakes.forEach(f=>{
    // draw
    ctx.beginPath();
    ctx.arc(f.x,f.y,f.r,0,Math.PI*2);
    ctx.fillStyle = `rgba(255,255,255,${f.opacity})`;
    ctx.fill();

    // interaction: move toward mouse gently (user wanted toward mouse direction)
    const dx = mouse.x - f.x;
    const dy = mouse.y - f.y;
    const dist = Math.sqrt(dx*dx + dy*dy);
    if(dist < 160 && mouse.x !== -9999){
      // gentle attraction toward mouse, small effect so not too puffy
      const factor = (160 - dist) / 160 * 0.6; // capped strength
      f.x += dx/dist * factor * 1.2;
      f.y += dy/dist * factor * 0.6;
    } else {
      // gentle horizontal swing
      f.x += Math.sin((f.y + t*0.001) * 0.003) * 0.5;
    }

    f.y += f.vy;
    if(f.y > canvas.height + 10){ f.y = -10; f.x = Math.random()*canvas.width; }
    if(f.x < -30) f.x = canvas.width + 30;
    if(f.x > canvas.width + 30) f.x = -30;
  });
  requestAnimationFrame(drawSnow);
}

drawSnow();

/* ---------- Options toggles (remember these) ---------- */
const snowToggle = document.getElementById('snowToggle'),
      presentsToggle = document.getElementById('presentsToggle'),
      treeToggle = document.getElementById('treeToggle'),
      bgToggle = document.getElementById('bgToggle'),
      presentsImg = document.getElementById('presentsImg'),
      treeImg = document.getElementById('treeImg');

const bgs = ["var(--bg1)","var(--bg2)","var(--bg3)","var(--bg4)"];
function setToggleState(el,state){ el.classList.toggle('active',!!state); el.setAttribute('aria-checked', !!state); }

const settings = JSON.parse(localStorage.getItem('settings') || '{}');
let snowOn = settings.snow !== false;
let presentsOn = settings.presents !== false;
let treeOn = settings.tree !== false;
let bgIndex = settings.bg || 0;

setToggleState(snowToggle, snowOn);
setToggleState(presentsToggle, presentsOn);
setToggleState(treeToggle, treeOn);
document.body.style.background = bgs[bgIndex];
presentsImg.style.opacity = presentsOn ? 1 : 0;
treeImg.style.opacity = treeOn ? 1 : 0;
if(!snowOn) canvas.style.display = 'none';

function saveSettings(){ localStorage.setItem('settings', JSON.stringify({ snow: snowOn, presents: presentsOn, tree: treeOn, bg: bgIndex })); }

snowToggle.addEventListener('click', ()=>{ snowOn = !snowOn; setToggleState(snowToggle, snowOn); canvas.style.display = snowOn ? 'block' : 'none'; saveSettings(); });
presentsToggle.addEventListener('click', ()=>{ presentsOn = !presentsOn; setToggleState(presentsToggle, presentsOn); presentsImg.style.opacity = presentsOn ? 1 : 0; saveSettings(); });
treeToggle.addEventListener('click', ()=>{ treeOn = !treeOn; setToggleState(treeToggle, treeOn); treeImg.style.opacity = treeOn ? 1 : 0; saveSettings(); });
bgToggle.addEventListener('click', ()=>{ bgIndex = (bgIndex + 1) % bgs.length; document.body.style.background = bgs[bgIndex]; saveSettings(); });

[snowToggle,presentsToggle,treeToggle,bgToggle].forEach(t => {
  t.addEventListener('keydown', e => { if(e.key === 'Enter' || e.key === ' ') { e.preventDefault(); t.click(); } });
});
</script>
</body>
</html>
